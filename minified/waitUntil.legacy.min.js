/*!
 * Generic wait until something happen function v1.0-legacy
 * This version mimics Promise for old browsers when Promise is not available
 * https://github.com/andrehtissot/js-wait-until
 *
 * Copyright Andr√© Augusto Tissot
 * Released under the MIT license
 *
 * Date: 2016-12-13
 */
var waitUntil=function(e,r,t){var r=r||-1;if(window.Promise)return new Promise(function(n,l){var i=setInterval(function(){e()?(clearInterval(i),n()):0===--r&&(clearInterval(i),l())},t||50)});var n={resolve:null,reject:null,then:function(e,r){return this.resolve=e,this.reject=r,this},catch:function(e){return this.reject=e,this}},l=setInterval(function(){if(e()){if(null===n.resolve)return;clearInterval(l),n.resolve&&n.resolve()}else 0===--r&&(null!==n.reject&&(clearInterval(l),n.reject&&n.reject()),r++)},t||50);return n};